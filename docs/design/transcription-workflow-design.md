# æ–‡å­—èµ·ã“ã—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆãƒ­ã‚°

**ä½œæˆæ—¥**: 2025-01-03
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**é–¢é€£PAD**: `docs/pad/transcription-schema.spd`, `docs/pad/transcription-workflow.spd`

---

## 1. è¨­è¨ˆã®èƒŒæ™¯ã¨ç›®çš„

### 1.1 æ—¢å­˜ã®èª²é¡Œ

æ—¢å­˜ã® `report_workflow.py` ãŠã‚ˆã³ `~/.claude/commands/` é…ä¸‹ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ç¾¤ã«ã¯ä»¥ä¸‹ã®èª²é¡ŒãŒã‚ã£ãŸï¼š

- **ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯æ§‹é€ **: 1ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šãƒ»å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ãƒ»å‡ºåŠ›ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæ··åœ¨ï¼ˆrehearsal.md: 302è¡Œã€srt-meeting-report.md: 549è¡Œï¼‰
- **å†åˆ©ç”¨æ€§ã®æ¬ å¦‚**: é¡ä¼¼ã®LuaTeXè¨­å®šãŒè¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã§é‡è¤‡
- **æ‹¡å¼µæ€§ã®åˆ¶é™**: æ–°ã—ã„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹è¿½åŠ æ™‚ã«å¤§å¹…ãªä¿®æ­£ãŒå¿…è¦

### 1.2 è¨­è¨ˆç›®æ¨™

1. **å†ç¾æ€§**: åŒã˜è¨­å®šã§åŒã˜çµæœã‚’å¾—ã‚‰ã‚Œã‚‹
2. **å†åˆ©ç”¨æ€§**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä½¿ã„å›ã›ã‚‹
3. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: CLIã‹ã‚‰ã‚‚åˆ©ç”¨å¯èƒ½ã€ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ
4. **åˆ†é›¢ã®åŸå‰‡**: è¨­å®šãƒ»æ§‹é€ å®šç¾©ãƒ»å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ãƒ»å‡ºåŠ›ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®åˆ†é›¢

---

## 2. è¨­è¨ˆæ€æƒ³

### 2.1 TeX/LaTeX ã‚¢ãƒŠãƒ­ã‚¸ãƒ¼

è¨­è¨ˆã¯TeX/LaTeXã®æ§‹é€ ã«å€£ã£ãŸï¼š

| TeX/LaTeX | æœ¬ã‚·ã‚¹ãƒ†ãƒ  | å½¹å‰² |
|-----------|-----------|------|
| `.tex` ãƒ•ã‚¡ã‚¤ãƒ« | `transcription_workflow.yaml` | å…·ä½“çš„ãªå€¤ï¼ˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰ |
| `.cls` / `.sty` | `profiles/*.yaml` | æ§‹é€ å®šç¾©ï¼ˆãƒã‚¯ãƒ­/ã‚¯ãƒ©ã‚¹ï¼‰ |
| `\section{...}` | `fields.title: "..."` | å†…å®¹ã®è¨˜è¿° |
| ãƒã‚¯ãƒ­å±•é–‹ | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ | å¤‰æ•°å±•é–‹ã¨å‡ºåŠ› |

### 2.2 åˆ†é›¢ã®åŸå‰‡

```
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆYAMLï¼‰     â†’ ã€Œä½•ã‚’ã€å‡¦ç†ã™ã‚‹ã‹ï¼ˆå€¤ï¼‰
ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆYAMLï¼‰     â†’ ã€Œã©ã®ã‚ˆã†ãªæ§‹é€ ã§ã€å‡¦ç†ã™ã‚‹ã‹ï¼ˆå‹å®šç¾©ï¼‰
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆMarkdownï¼‰   â†’ ã€ŒAIã«ä½•ã‚’æŒ‡ç¤ºã™ã‚‹ã‹ã€ï¼ˆå‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆTeXï¼‰      â†’ ã€Œã©ã®ã‚ˆã†ãªå½¢å¼ã§ã€å‡ºåŠ›ã™ã‚‹ã‹ï¼ˆå‡ºåŠ›å½¢å¼ï¼‰
```

---

## 3. ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ

### 3.1 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆtranscription_workflow.yamlï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¯å›ç·¨é›†ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨­å®šï¼š

```yaml
schema_version: "1.0"
profile: "orchestral_rehearsal"

source:
  type: "local"              # local | youtube
  path: "video.mp4"
  working_dir: "/path/to/project"
  files:
    youtube_srt: "video_yt.srt"
    whisper_srt: "video_wp.srt"

transcription:
  method: "whisper"          # youtube | whisper | manual | skip
  language: "ja"

fields:
  title: "ãƒ–ãƒ©ãƒ¼ãƒ ã‚¹äº¤éŸ¿æ›²ç¬¬1ç•ª"
  date: "2025-01-03"
  key_person: "å±±ç”°å¤ªéƒ"
  organization: "ã€‡ã€‡äº¤éŸ¿æ¥½å›£"

output:
  basename: "rehearsal_record"
  format: "latex"            # markdown | latex | docx
```

### 3.2 ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆprofiles/*.yamlï¼‰

ãƒã‚¯ãƒ­å®šç¾©ã€‚ç¨€ã«ç·¨é›†ï¼š

```yaml
name: "ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ãƒªãƒãƒ¼ã‚µãƒ«"
icon: "ğŸ¼"
base_template: "luatex_twocolumn.tex"
macros: ["common.tex"]

participants:
  type: "hierarchical"       # hierarchical | flat
  instructor:
    label: "æŒ‡æ®è€…"
  students:
    label: "å¥è€…"

field_schema:
  title:
    label: "æ›²ç›®"
    required: true
  date:
    label: "ç·´ç¿’æ—¥"
    type: "date"
  key_person:
    label: "æŒ‡æ®è€…"
  organization:
    label: "å›£ä½“å"

source_schema:
  multi_srt: true
  files:
    youtube_srt: { pattern: "*_yt.srt" }
    whisper_srt: { pattern: "*_wp.srt" }

prompt_template: "orchestral_rehearsal.md"
glossary: "music_terms.yaml"
```

### 3.3 å‚åŠ è€…æ§‹é€ ã®é¡å‹

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | æ§‹é€  | ä¾‹ |
|----------|------|-----|
| **hierarchical** | è¬›å¸« â†’ ç”Ÿå¾’ | ãƒ¬ãƒƒã‚¹ãƒ³ã€è¬›ç¾©ã€ãƒªãƒãƒ¼ã‚µãƒ« |
| **flat** | å‚åŠ è€…A = å‚åŠ è€…B | ä¼šè­°ã€åº§è«‡ä¼š |

---

## 4. ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
~/.config/rehearsal-workflow/          # ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼‰
â”œâ”€â”€ profiles/
â”‚   â”œâ”€â”€ orchestral_rehearsal.yaml      # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ãƒªãƒãƒ¼ã‚µãƒ«
â”‚   â”œâ”€â”€ horn_lesson.yaml               # ãƒ›ãƒ«ãƒ³ãƒ¬ãƒƒã‚¹ãƒ³
â”‚   â”œâ”€â”€ meeting_report.yaml            # ä¼šè­°ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ orchestral_rehearsal.md
â”‚   â”œâ”€â”€ horn_lesson.md
â”‚   â”œâ”€â”€ meeting_report.md
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ luatex_twocolumn.tex           # å…±é€šLuaTeXè¨­å®š
â”‚
â”œâ”€â”€ macros/
â”‚   â”œâ”€â”€ common.tex                     # JSTæ—¥æ™‚ã€ãƒªãƒ³ã‚¯è‰²
â”‚   â””â”€â”€ meeting_speakers.tex           # ç™ºè¨€è€…ãƒã‚¯ãƒ­
â”‚
â”œâ”€â”€ glossaries/
â”‚   â”œâ”€â”€ music_terms.yaml
â”‚   â”œâ”€â”€ horn_techniques.yaml
â”‚   â””â”€â”€ defense_acronyms.yaml
â”‚
â””â”€â”€ config.yaml                        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ


ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª/                       # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½
â”œâ”€â”€ transcription_workflow.yaml        # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ video.mp4
â”œâ”€â”€ video_yt.srt
â”œâ”€â”€ video_wp.srt
â””â”€â”€ output/
    â””â”€â”€ rehearsal_record.tex
```

---

## 5. é©ç”¨å¯¾è±¡ã®åˆ†æ

### 5.1 æ—¢å­˜ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ã®åˆ†æ

| ã‚³ãƒãƒ³ãƒ‰ | è¡Œæ•° | å¯¾è±¡ | ç‰¹æ®Šå‡¦ç† |
|----------|------|------|----------|
| `rehearsal.md` | 302 | ã‚ªã‚±ãƒªãƒ | éŸ³æ¥½ç”¨èªæ ¡æ­£ã€ãƒ‘ãƒ¼ãƒˆåˆ¥æŠ½å‡º |
| `horn_hamaji.md` | 127 | ãƒ›ãƒ«ãƒ³ãƒ¬ãƒƒã‚¹ãƒ³ | åˆå¿ƒè€…å‘ã‘è£œè¶³ |
| `srt-meeting-report.md` | 549 | å›½éš›ä¼šè­° | ç™ºè¨€è€…è­˜åˆ¥ã€footnoteã€ãƒãƒ£ãƒ—ã‚¿ãƒ¼ç”Ÿæˆ |

### 5.2 å…±é€šè¦ç´ ï¼ˆtemplates/luatex_twocolumn.tex ã¨ã—ã¦å…±æœ‰ï¼‰

- LuaTeX 2æ®µçµ„è¨­å®š
- ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šï¼ˆLibertinus + åŸãƒå‘³ï¼‰
- JSTæ—¥æ™‚è¡¨ç¤º
- ãƒã‚¤ãƒ‘ãƒ¼ãƒªãƒ³ã‚¯è‰²è¨­å®š
- è¡¨ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆç¸¦ç·šãªã—ã€booktabsï¼‰

### 5.3 å·®åˆ†è¦ç´ ï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å·®åˆ¥åŒ–ï¼‰

- field_schemaï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©ï¼‰
- participantsï¼ˆå‚åŠ è€…æ§‹é€ ï¼‰
- prompt_templateï¼ˆAIæŒ‡ç¤ºï¼‰
- glossaryï¼ˆç”¨èªé›†ï¼‰
- output.additional_filesï¼ˆè¿½åŠ å‡ºåŠ›ï¼‰

---

## 6. å‡¦ç†ãƒ•ãƒ­ãƒ¼

### Phase 1: åˆæœŸåŒ–
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ or æ–°è¦ä½œæˆ

### Phase 2: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è§£æ±º
- æ¤œç´¢é †åº: ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š â†’ ãƒ“ãƒ«ãƒˆã‚¤ãƒ³
- ãƒªã‚½ãƒ¼ã‚¹èª­è¾¼: template, macros, prompt, glossary

### Phase 3: ã‚½ãƒ¼ã‚¹å‡¦ç†
- local: ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèªã€SRTèª­è¾¼
- youtube: yt-srtå®Ÿè¡Œã€SRTä¿å­˜

### Phase 4: æ–‡å­—èµ·ã“ã—
- youtube / whisper / manual / skip
- è¤‡æ•°SRTã®çµ±åˆï¼ˆç›¸è£œçš„ãƒãƒ¼ã‚¸ï¼‰

### Phase 5: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°å±•é–‹
- å‚åŠ è€…æƒ…å ±å±•é–‹ï¼ˆhierarchical/flatï¼‰
- å­—å¹•ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿

### Phase 6: AIå‡¦ç†ï¼ˆå¤–éƒ¨ï¼‰
- Claude / ChatGPT / ãƒ­ãƒ¼ã‚«ãƒ«LLM

### Phase 7: å‡ºåŠ›ç”Ÿæˆ
- markdown / latex / docx
- è¿½åŠ ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒãƒ£ãƒ—ã‚¿ãƒ¼ç­‰ï¼‰
- çŠ¶æ…‹ä¿å­˜

---

## 7. å¯è¦–åŒ–æ‰‹æ³•ã®é¸æŠ

| å¯¾è±¡ | æ‰‹æ³• | ç†ç”± |
|------|------|------|
| ã‚¹ã‚­ãƒ¼ãƒæ§‹é€  | **Mermaid ã‚°ãƒ©ãƒ•** | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–“ã®å‚ç…§é–¢ä¿‚ã‚’è¡¨ç¾ |
| å‡¦ç†ãƒ•ãƒ­ãƒ¼ | **PAD** | æ‰‹ç¶šããƒ»åˆ†å²ãƒ»é †åºã‚’è¡¨ç¾ |

---

## 8. ä»Šå¾Œã®å®Ÿè£…ã‚¿ã‚¹ã‚¯

1. [ ] dataclasså®Ÿè£…
2. [ ] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿æ›¸ããƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ
3. [ ] UIã®åŸºæœ¬æ§‹é€ è¨­è¨ˆ
4. [ ] æ–‡å­—èµ·ã“ã—å‡¦ç†ãƒ¯ãƒ¼ã‚«ãƒ¼ã®å®Ÿè£…
5. [ ] ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ•´å‚™

---

## 9. å‚è€ƒè³‡æ–™

- æ—¢å­˜ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰: `~/.claude/commands/`
- PADå›³: `docs/pad/transcription-*.spd`
- Video Chapter Editor: `rehearsal_workflow/ui/main_workspace.py`
